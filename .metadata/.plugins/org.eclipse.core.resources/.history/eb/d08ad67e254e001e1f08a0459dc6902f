package sp1;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.List;

import javax.naming.spi.DirStateFactory.Result;



public class product_list {
	Connection conn = null;
	PreparedStatement ps = null; //interface
	
	public product_list() {
		try {
			this.conn = dbconfig.info();
			//System.out.println(this.conn);
		}
		catch(Exception e) {
			System.out.println("Database 연결오류 발생!!");
		}
	}

	//검색어가 있을 경우의 메소드
	/*
	 1. 검색어를 입력시 데이터베이스에 값과 동일할 경우
	 2. 검색어를 입력시 데이터베이스와 값이 동일한 내용이 없을 경우
	 */
	public List<ArrayList<String>> listdata(){
		List<ArrayList<String>> product =new ArrayList<ArrayList<String>>();
		try {
			String sql = "select * from member2 order by mno desc";
			this.ps = this.conn.prepareStatement(sql);
			ResultSet rs = this.ps.executeQuery(); // javaspl interface
			//System.out.println(this.ps);
			product_dto dto = new dto_product(); //dto setter, getter, Array생성
			while(rs.next()) {
				dto.setPidx(rs.getString("pidx"));  //getString("mno") :실제 데이터베이스 필드 명
				dto.setPidx(rs.getString("pcode"));
				dto.setPidx(rs.getString("pname"));
				dto.setPidx(rs.getString("pmoney"));
				dto.setPidx(rs.getString("pimg"));
				dto.setPidx(rs.getString("psale"));
				dto.setPidx(rs.getString("puse"));
				product.add(dto.db_data());
			}
			this.conn.close();
		}
		catch(Exception e) {
			System.out.println("Database 컬럼 및 dto 오류발생!!");
		}
		
		return product;
	}
}
